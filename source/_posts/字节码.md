title: java概览
author: jianghe
tags:
  - jvm
categories:
  - jvm
date: 2021-01-29 14:38:00
---
### java概览

#### 1. 重要概念
- java编程语言
- 字节码
- Java api
- java虚拟机


![1](/images/pasted-9.png)

#### 1.1 字节码

##### 1.1.1 一次编译，处处运行(write once,run anywhere)
java源代码的默认编译结果并非是可执行的代码(本地机器指令)，而是具有平台通用性的字节码。尽管不同平台java虚拟机内部实现机制不尽相同，但是他们共同解释出的字节码是一样的。所以说字节码才是java实现跨平台的关键要素

![1.1.1](/images/pasted-5.png)


##### 1.1.2 什么是字节码
任何编程语言的编译结果满足并包含java虚拟机的内部指令集、符号表以及一些其他辅助信息，它就是一个有效的字节码文件，就能够被虚拟机所识别并装载运行。

#### 1.2 java虚拟机

![1.2](/images/pasted-6.png)

- Hotspot是最流行的java虚拟机
	- 当虚拟机启动的时候，解释器首先发挥作用，而不必等待编译器全部编译完成再执行，这样减少编译的时间
	- 热点探测功能将一个被频繁调用的方法或者方法体中有效循环次数较多的代码块标记为“热点代码”，通过内嵌的双重JIT(just in time compiler)编译器将字节码直接编译为本地机器指令
	- 即时编译器与解释器并存，通过编译器与解释器的协同工作，既可以保证程序的响应时间，同时还能够提高程序的执行性能，并且对编译器的工作压力也降低了一定程度的负载
    - 两个JIT分别是client compiler、server compiler，简称C1编译器和C2编译器。
		- C1编译器会对字节码进行简单和可靠的优化，已达到更快的编译速度
		- C2编译器会启动一些编译耗时更长的优化，已获得更好的编译质量
	- 编译策略
		- 完全编译策略
			- 编译器
            - 解释器在编译器无法进行的特殊情况会介入执行
		- 完全解释策略
			- 解释器
		- 默认编译策略
			- hotspot会根据操作系统和机器性能来自动选择
    
    
![1.2](/images/pasted-8.png)